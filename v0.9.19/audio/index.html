<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Audio · NNlib.jl</title><meta name="title" content="Audio · NNlib.jl"/><meta property="og:title" content="Audio · NNlib.jl"/><meta property="twitter:title" content="Audio · NNlib.jl"/><meta name="description" content="Documentation for NNlib.jl."/><meta property="og:description" content="Documentation for NNlib.jl."/><meta property="twitter:description" content="Documentation for NNlib.jl."/><meta property="og:url" content="https://fluxml.ai/NNlib.jl/stable/audio/"/><meta property="twitter:url" content="https://fluxml.ai/NNlib.jl/stable/audio/"/><link rel="canonical" href="https://fluxml.ai/NNlib.jl/stable/audio/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/flux.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="NNlib.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">NNlib.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../reference/">Reference</a></li><li class="is-active"><a class="tocitem" href>Audio</a><ul class="internal"><li><a class="tocitem" href="#Window-functions"><span>Window functions</span></a></li><li><a class="tocitem" href="#Spectral"><span>Spectral</span></a></li><li><a class="tocitem" href="#Spectrogram"><span>Spectrogram</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Audio</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Audio</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/FluxML/NNlib.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/FluxML/NNlib.jl/blob/master/docs/src/audio.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Reference"><a class="docs-heading-anchor" href="#Reference">Reference</a><a id="Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Reference" title="Permalink"></a></h1><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Spectral functions require importing <code>FFTW</code> package to enable them.</p></div></div><h2 id="Window-functions"><a class="docs-heading-anchor" href="#Window-functions">Window functions</a><a id="Window-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Window-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NNlib.hann_window" href="#NNlib.hann_window"><code>NNlib.hann_window</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">hann_window(
    window_length::Int, ::Type{T} = Float32; periodic::Bool = true,
) where T &lt;: Real</code></pre><p>Hann window function (ref: https://en.wikipedia.org/wiki/Window<em>function#Hann</em>and<em>Hamming</em>windows).</p><p><span>$w[n] = \frac{1}{2}[1 - cos(\frac{2 \pi n}{N - 1})]$</span></p><p>Where <span>$N$</span> is the window length.</p><pre><code class="language-julia hljs">julia&gt; lineplot(hann_window(100); width=30, height=10)
     ┌──────────────────────────────┐
   1 │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⠚⠉⠉⠉⠢⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡔⠁⠀⠀⠀⠀⠀⠘⢄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠞⠀⠀⠀⠀⠀⠀⠀⠀⠈⢆⠀⠀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⠀⠀⠀⢀⡎⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢣⠀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⠀⠀⠀⡎⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢦⠀⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⠀⢀⠞⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢆⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⢀⡜⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢇⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⢀⠎⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢦⠀⠀⠀⠀│
     │⠀⠀⠀⢠⠊⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠣⡀⠀⠀│
   0 │⣀⣀⠔⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⢤⣀│
     └──────────────────────────────┘
     ⠀0⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀100⠀</code></pre><p><strong>Arguments:</strong></p><ul><li><code>window_length::Int</code>: Size of the window.</li><li><code>::Type{T}</code>: Elemet type of the window.</li></ul><p><strong>Keyword Arguments:</strong></p><ul><li><p><code>periodic::Bool</code>: If <code>true</code> (default), returns a window to be used as   periodic function. If <code>false</code>, return a symmetric window.</p><p>Following always holds:</p></li></ul><pre><code class="language-julia-repl hljs">julia&gt; N = 256;

julia&gt; hann_window(N; periodic=true) ≈ hann_window(N + 1; periodic=false)[1:end - 1]
true

julia&gt; hann_window(N) ≈ hamming_window(N; α=0.5f0, β=0.5f0)
true</code></pre><p><strong>Returns:</strong></p><p>Vector of length <code>window_length</code> and eltype <code>T</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/NNlib.jl/blob/f87cf6e3b65d1240b80873d4ea731076e8347ca2/src/audio/stft.jl#L69-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NNlib.hamming_window" href="#NNlib.hamming_window"><code>NNlib.hamming_window</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">hamming_window(
    window_length::Int, ::Type{T} = Float32; periodic::Bool = true,
    α::T = T(0.54), β::T = T(0.46),
) where T &lt;: Real</code></pre><p>Hamming window function (ref: https://en.wikipedia.org/wiki/Window<em>function#Hann</em>and<em>Hamming</em>windows). Generalized version of <code>hann_window</code>.</p><p><span>$w[n] = \alpha - \beta cos(\frac{2 \pi n}{N - 1})$</span></p><p>Where <span>$N$</span> is the window length.</p><pre><code class="language-julia hljs">julia&gt; lineplot(hamming_window(100); width=30, height=10)
     ┌──────────────────────────────┐
   1 │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡠⠚⠉⠉⠉⠢⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠎⠁⠀⠀⠀⠀⠀⠈⢢⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⠊⠀⠀⠀⠀⠀⠀⠀⠀⠀⢣⡀⠀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⠀⠀⠀⢰⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠱⡀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⠀⠀⣠⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠳⡀⠀⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⠀⢰⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠱⡄⠀⠀⠀⠀⠀│
     │⠀⠀⠀⠀⠀⡰⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠱⡀⠀⠀⠀⠀│
     │⠀⠀⠀⢀⠴⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⢄⠀⠀⠀│
     │⠀⢀⡠⠊⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠳⣀⠀│
   0 │⠉⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉│
     └──────────────────────────────┘
     ⠀0⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀100⠀</code></pre><p><strong>Arguments:</strong></p><ul><li><code>window_length::Int</code>: Size of the window.</li><li><code>::Type{T}</code>: Elemet type of the window.</li></ul><p><strong>Keyword Arguments:</strong></p><ul><li><p><code>periodic::Bool</code>: If <code>true</code> (default), returns a window to be used as   periodic function. If <code>false</code>, return a symmetric window.</p><p>Following always holds:</p></li></ul><pre><code class="language-julia-repl hljs">julia&gt; N = 256;

julia&gt; hamming_window(N; periodic=true) ≈ hamming_window(N + 1; periodic=false)[1:end - 1]
true</code></pre><ul><li><code>α::Real</code>: Coefficient α in the equation above.</li><li><code>β::Real</code>: Coefficient β in the equation above.</li></ul><p><strong>Returns:</strong></p><p>Vector of length <code>window_length</code> and eltype <code>T</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/NNlib.jl/blob/f87cf6e3b65d1240b80873d4ea731076e8347ca2/src/audio/stft.jl#L1-L56">source</a></section></article><h2 id="Spectral"><a class="docs-heading-anchor" href="#Spectral">Spectral</a><a id="Spectral-1"></a><a class="docs-heading-anchor-permalink" href="#Spectral" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NNlib.stft" href="#NNlib.stft"><code>NNlib.stft</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stft(x;
    n_fft::Int, hop_length::Int = n_fft ÷ 4, window = nothing,
    center::Bool = true, normalized::Bool = false,
)</code></pre><p>Short-time Fourier transform (STFT).</p><p>The STFT computes the Fourier transform of short overlapping windows of the input, giving frequency components of the signal as they change over time.</p><p><span>$Y[\omega, m] = \sum_{k = 0}^{N - 1} \text{window}[k] \text{input}[m \times \text{hop length} + k] exp(-j \frac{2 \pi \omega k}{\text{n fft}})$</span></p><p>where <span>$N$</span> is the window length, <span>$\omega$</span> is the frequency <span>$0 \le \omega &lt; \text{n fft}$</span> and <span>$m$</span> is the index of the sliding window.</p><p><strong>Arguments:</strong></p><ul><li><code>x</code>: Input, must be either a 1D time sequence (<code>(L,)</code> shape)   or a 2D batch of time sequence (<code>(L, B)</code> shape).</li></ul><p><strong>Positional Arguments:</strong></p><ul><li><code>n_fft::Int</code>: Size of Fourier transform.</li><li><code>hop_length::Int</code>: Distance between neighboring sliding window frames.</li><li><code>window</code>: Optional window function to apply.   Must be 1D vector <code>0 &lt; length(window) ≤ n_fft</code>.   If window is shorter than <code>n_fft</code>, it is padded with zeros on both sides.   If <code>nothing</code> (default), then no window is applied.</li><li><code>center::Bool</code>: Whether to pad input on both sides so that <span>$t$</span>-th frame   is centered at time <span>$t \times \text{hop length}$</span>.   Padding is done with <code>pad_reflect</code> function.</li><li><code>normalized::Bool</code>: Whether to return normalized STFT,   i.e. multiplied with <span>$\text{n fft}^{-0.5}$</span>.</li></ul><p><strong>Returns:</strong></p><p>Complex array of shape <code>(n_fft, n_frames, B)</code>, where <code>B</code> is the optional batch dimension.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/NNlib.jl/blob/f87cf6e3b65d1240b80873d4ea731076e8347ca2/src/audio/stft.jl#L130-L170">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NNlib.istft" href="#NNlib.istft"><code>NNlib.istft</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">istft(y;
    n_fft::Int, hop_length::Int = n_fft ÷ 4, window = nothing,
    center::Bool = true, normalized::Bool = false,
    return_complex::Bool = false,
    original_length::Union{Nothing, Int} = nothing,
)</code></pre><p>Inverse Short-time Fourier Transform.</p><p>Return the least squares estimation of the original signal</p><p><strong>Arguments:</strong></p><ul><li><code>y</code>: Input complex array in the <code>(n_fft, n_frames, B)</code> shape.   Where <code>B</code> is the optional batch dimension.</li></ul><p><strong>Positional Arguments:</strong></p><ul><li><code>n_fft::Int</code>: Size of Fourier transform.</li><li><code>hop_length::Int</code>: Distance between neighboring sliding window frames.</li><li><code>window</code>: Window function that was applied to the input of <code>stft</code>.   If <code>nothing</code> (default), then no window was applied.</li><li><code>center::Bool</code>: Whether input to <code>stft</code> was padded on both sides   so that <span>$t$</span>-th frame is centered at time <span>$t \times \text{hop length}$</span>.   Padding is done with <code>pad_reflect</code> function.</li><li><code>normalized::Bool</code>: Whether input to <code>stft</code> was normalized.</li><li><code>return_complex::Bool</code>: Whether the output should be complex,   or if the input should be assumed to derive from a real signal and window.</li><li><code>original_length::Union{Nothing, Int}</code>: Optional size of the first dimension   of the input to <code>stft</code>. Helps restoring the exact <code>stft</code> input size.   Otherwise, the array might be a bit shorter.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/NNlib.jl/blob/f87cf6e3b65d1240b80873d4ea731076e8347ca2/src/audio/stft.jl#L173-L205">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NNlib.power_to_db" href="#NNlib.power_to_db"><code>NNlib.power_to_db</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">power_to_db(s; ref::Real = 1f0, amin::Real = 1f-10, top_db::Real = 80f0)</code></pre><p>Convert a power spectrogram (amplitude squared) to decibel (dB) units.</p><p><strong>Arguments</strong></p><ul><li><code>s</code>: Input power.</li><li><code>ref</code>: Scalar w.r.t. which the input is scaled.</li><li><code>amin</code>: Minimum threshold for <code>s</code>.</li><li><code>top_db</code>: Threshold the output at <code>top_db</code> below the peak:   <code>max.(s_db, maximum(s_db) - top_db)</code>.</li></ul><p><strong>Returns</strong></p><p><code>s_db ~= 10 * log10(s) - 10 * log10(ref)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/NNlib.jl/blob/f87cf6e3b65d1240b80873d4ea731076e8347ca2/src/audio/spectrogram.jl#L50-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NNlib.db_to_power" href="#NNlib.db_to_power"><code>NNlib.db_to_power</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">db_to_power(s_db; ref::Real = 1f0)</code></pre><p>Inverse of <a href="#NNlib.power_to_db"><code>power_to_db</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/NNlib.jl/blob/f87cf6e3b65d1240b80873d4ea731076e8347ca2/src/audio/spectrogram.jl#L72-L76">source</a></section></article><h2 id="Spectrogram"><a class="docs-heading-anchor" href="#Spectrogram">Spectrogram</a><a id="Spectrogram-1"></a><a class="docs-heading-anchor-permalink" href="#Spectrogram" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NNlib.melscale_filterbanks" href="#NNlib.melscale_filterbanks"><code>NNlib.melscale_filterbanks</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">melscale_filterbanks(;
    n_freqs::Int, n_mels::Int, sample_rate::Int,
    fmin::Float32 = 0f0, fmax::Float32 = Float32(sample_rate ÷ 2))</code></pre><p>Create triangular Mel scale filter banks (ref: https://en.wikipedia.org/wiki/Mel_scale). Each column is a filterbank that highlights its own frequency.</p><p><strong>Arguments:</strong></p><ul><li><code>n_freqs::Int</code>: Number of frequencies to highlight.</li><li><code>n_mels::Int</code>: Number of mel filterbanks.</li><li><code>sample_rate::Int</code>: Sample rate of the audio waveform.</li><li><code>fmin::Float32</code>: Minimum frequency in Hz.</li><li><code>fmax::Float32</code>: Maximum frequency in Hz.</li></ul><p><strong>Returns:</strong></p><p>Filterbank matrix of shape <code>(n_freqs, n_mels)</code> where each column is a filterbank.</p><pre><code class="language-julia-repl hljs">julia&gt; n_mels = 8;

julia&gt; fb = melscale_filterbanks(; n_freqs=200, n_mels, sample_rate=16000);

julia&gt; plot = lineplot(fb[:, 1]);

julia&gt; for i in 2:n_mels
           lineplot!(plot, fb[:, i])
       end

julia&gt; plot
     ┌────────────────────────────────────────┐
   1 │⠀⡀⢸⠀⢸⠀⠀⣧⠀⠀⢸⡄⠀⠀⠀⣷⠀⠀⠀⠀⠀⣷⠀⠀⠀⠀⠀⠀⢀⣿⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⡇⢸⡆⢸⡇⠀⣿⠀⠀⡜⡇⠀⠀⢰⠋⡆⠀⠀⠀⢰⠁⡇⠀⠀⠀⠀⠀⡸⠀⢣⠀⠀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⣿⢸⡇⡇⡇⢰⠹⡄⠀⡇⢱⠀⠀⢸⠀⢣⠀⠀⠀⡜⠀⢸⡀⠀⠀⠀⢀⠇⠀⠈⡇⠀⠀⠀⠀⠀⠀⠀⠀│
     │⠀⣿⡇⡇⡇⡇⢸⠀⡇⢀⠇⠸⡀⠀⡇⠀⠸⡀⠀⢀⠇⠀⠀⢇⠀⠀⠀⡸⠀⠀⠀⠸⡄⠀⠀⠀⠀⠀⠀⠀│
     │⢠⢻⡇⡇⡇⢱⢸⠀⢇⢸⠀⠀⡇⢀⠇⠀⠀⡇⠀⢸⠀⠀⠀⠸⡀⠀⢠⠇⠀⠀⠀⠀⢱⠀⠀⠀⠀⠀⠀⠀│
     │⢸⢸⡇⢱⡇⢸⡇⠀⢸⢸⠀⠀⢣⢸⠀⠀⠀⢸⠀⡇⠀⠀⠀⠀⢇⠀⡜⠀⠀⠀⠀⠀⠈⢇⠀⠀⠀⠀⠀⠀│
     │⢸⢸⡇⢸⠀⢸⡇⠀⢸⡇⠀⠀⢸⡎⠀⠀⠀⠈⣶⠁⠀⠀⠀⠀⠸⣤⠃⠀⠀⠀⠀⠀⠀⠘⡆⠀⠀⠀⠀⠀│
     │⢸⠀⡇⢸⠀⠀⡇⠀⠀⡇⠀⠀⠀⡇⠀⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⠀⠀⢱⡀⠀⠀⠀⠀│
     │⢸⢸⡇⢸⠀⢸⡇⠀⢸⡇⠀⠀⢸⢇⠀⠀⠀⢀⠿⡀⠀⠀⠀⠀⢰⠛⡄⠀⠀⠀⠀⠀⠀⠀⠀⢣⠀⠀⠀⠀│
     │⢸⢸⡇⡸⡇⢸⡇⠀⢸⢸⠀⠀⡜⢸⠀⠀⠀⢸⠀⡇⠀⠀⠀⠀⡎⠀⢣⠀⠀⠀⠀⠀⠀⠀⠀⠘⡆⠀⠀⠀│
     │⢸⢸⡇⡇⡇⡸⢸⠀⡎⢸⠀⠀⡇⠈⡆⠀⠀⡇⠀⢸⠀⠀⠀⢰⠁⠀⠘⡆⠀⠀⠀⠀⠀⠀⠀⠀⠸⡄⠀⠀│
     │⡇⢸⡇⡇⡇⡇⢸⠀⡇⠈⡆⢰⠁⠀⡇⠀⢰⠁⠀⠈⡆⠀⠀⡎⠀⠀⠀⢱⠀⠀⠀⠀⠀⠀⠀⠀⠀⢣⠀⠀│
     │⡇⢸⢸⡇⡇⡇⠸⣰⠃⠀⡇⡸⠀⠀⢸⠀⡜⠀⠀⠀⢣⠀⢸⠁⠀⠀⠀⠈⡆⠀⠀⠀⠀⠀⠀⠀⠀⠈⢇⠀│
     │⡇⡇⢸⠇⢸⡇⠀⣿⠀⠀⢣⡇⠀⠀⠸⣄⠇⠀⠀⠀⠸⡀⡇⠀⠀⠀⠀⠀⢱⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⡄│
   0 │⣇⣇⣸⣀⣸⣀⣀⣟⣀⣀⣸⣃⣀⣀⣀⣿⣀⣀⣀⣀⣀⣿⣀⣀⣀⣀⣀⣀⣈⣇⣀⣀⣀⣀⣀⣀⣀⣀⣀⣱│
     └────────────────────────────────────────┘
     ⠀0⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀200⠀</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/NNlib.jl/blob/f87cf6e3b65d1240b80873d4ea731076e8347ca2/src/audio/mel.jl#L1-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NNlib.spectrogram" href="#NNlib.spectrogram"><code>NNlib.spectrogram</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">spectrogram(waveform;
    pad::Int = 0, n_fft::Int, hop_length::Int, window,
    center::Bool = true, power::Real = 2.0,
    normalized::Bool = false, window_normalized::Bool = false,
)</code></pre><p>Create a spectrogram or a batch of spectrograms from a raw audio signal.</p><p><strong>Arguments</strong></p><ul><li><code>pad::Int</code>:   Then amount of padding to apply on both sides.</li><li><code>window_normalized::Bool</code>:   Whether to normalize the waveform by the window’s L2 energy.</li><li><code>power::Real</code>:   Exponent for the magnitude spectrogram (must be ≥ 0)   e.g., <code>1</code> for magnitude, <code>2</code> for power, etc.   If <code>0</code>, complex spectrum is returned instead.</li></ul><p>See <a href="#NNlib.stft"><code>stft</code></a> for other arguments.</p><p><strong>Returns</strong></p><p>Spectrogram in the shape <code>(T, F, B)</code>, where <code>T</code> is the number of window hops and <code>F = n_fft ÷ 2 + 1</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/NNlib.jl/blob/f87cf6e3b65d1240b80873d4ea731076e8347ca2/src/audio/spectrogram.jl#L1-L27">source</a></section></article><p>Example:</p><pre><code class="language-julia hljs">using FFTW # &lt;- required for STFT support.
using NNlib
using FileIO
using Makie, CairoMakie
CairoMakie.activate!()

waveform, sampling_rate = load(&quot;./assets/jfk.flac&quot;)
fig = lines(reshape(waveform, :))
save(&quot;waveform.png&quot;, fig)

# Spectrogram.

n_fft = 1024
spec = spectrogram(waveform; n_fft, hop_length=n_fft ÷ 4, window=hann_window(n_fft))
fig = heatmap(transpose(NNlib.power_to_db(spec)[:, :, 1]))
save(&quot;spectrogram.png&quot;, fig)

# Mel-scale spectrogram.

n_freqs = n_fft ÷ 2 + 1
fb = melscale_filterbanks(; n_freqs, n_mels=128, sample_rate=Int(sampling_rate))
mel_spec = permutedims(spec, (2, 1, 3)) ⊠ fb # (time, n_mels)
fig = heatmap(NNlib.power_to_db(mel_spec)[:, :, 1])
save(&quot;mel-spectrogram.png&quot;, fig)</code></pre><table><tr><th style="text-align: center">Waveform</th><th style="text-align: center">Spectrogram</th><th style="text-align: center">Mel Spectrogram</th></tr><tr><td style="text-align: center"><img src="../waveform.png" alt/></td><td style="text-align: center"><img src="../spectrogram.png" alt/></td><td style="text-align: center"><img src="../mel-spectrogram.png" alt/></td></tr></table></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../reference/">« Reference</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Thursday 4 July 2024 07:54">Thursday 4 July 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
